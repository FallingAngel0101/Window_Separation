# ADR 001: Выбор фронтенд-фреймворка (React)

**Статус:** Принят

## Контекст

Требуется создать интуитивно понятный интерфейс для управления несколькими окнами в одном браузерном экране. Ключевые требования:
- Поддержка динамического изменения макета (drag-and-drop).
- Высокая производительность при работе с 4+ окнами.
- Интеграция с разными браузерами (Chrome, Firefox, Edge).

## Решение

Выбран React + Window Management Library (например, react-grid-layout).

## Обоснование

**React:**
- Виртуальный DOM для быстрого рендеринга.
- Поддержка компонентного подхода (каждое окно — независимый компонент).
- Богатая экосистема (готовые решения для drag-and-drop).

**react-grid-layout:**
- Гибкое управление сеткой окон.
- Поддержка адаптивности.

## Альтернативы

| Вариант         | Плюсы                     | Минусы                          |
|-----------------|---------------------------|----------------------------------|
| Vue + VueDraggable | Простота настройки        | Меньше готовых UI-библиотек      |
| Svelte         | Высокая производительность | Ограниченная совместимость       |

## Последствия

**Плюсы:**
- Быстрая разработка за счет готовых компонентов.
- Поддержка сложных сценариев.

**Минусы:**
- Размер бандла

# ADR 002: Реализация REST API для плагина

**Статус:** Принято

## Контекст

Требуется простое REST API для:
- Сохранения/загрузки конфигураций окон.
- Синхронизации между устройствами.

## Решение

Используем чистый REST (без привязки к FastAPI) со следующими характеристиками:
- Протокол: HTTP/HTTPS
- Формат данных: JSON
- Аутентификация: JWT - токен используется для аутентификации и обмена данными.
- Сервер: Любой (Node.js, Go, Python, etc.)

### Почему REST без FastAPI?
- Гибкость: Можно развернуть на любом стеке (Node.js, Go, Rust).
- Минимализм: Не нужны сложные фреймворки для задач плагина.
- Совместимость: JSON + HTTP понимают все браузеры.

## Альтернативы

| Вариант | Плюсы | Минусы |
|---------|-------|--------|
| GraphQL | Гибкие запросы | Избыточен для плагина |
| gRPC | Высокая скорость | Сложная интеграция |

## Последствия

**Плюсы:**
- Полная независимость от языка/фреймворка.
- Простота отладки через DevTools.

**Минусы:**
- Нужно самостоятельно реализовать валидацию.
# ADR 003: Выбор хранилища данных (PostgreSQL)

**Статус:** Принято

## Контекст

Необходимо сохранять и синхронизировать настройки окон между устройствами.

Требования:
- Поддержка сложных структур данных (JSON-конфигурации окон).
- Отказоустойчивость и репликация.

## Решение

Выбрана PostgreSQL с использованием JSONB для хранения конфигураций.

### Обоснование
- **JSONB:** Гибкость хранения динамических настроек.
- **Репликация:** Обеспечивает отказоустойчивость.

## Альтернативы

| Вариант | Плюсы | Минусы |
|---------|-------|--------|
| MongoDB | Гибкость схемы | Меньше транзакционных возможностей |
| Redis | Высокая скорость | Не подходит для сложных запросов |

## Последствия

**Плюсы:**
- Поддержка сложных запросов.
- Надежность.

**Минусы:**
- Требует настройки репликации

# ADR 004: Мониторинг системы (Prometheus + Grafana)

**Статус:** Принято

## Контекст

Необходимо отслеживать:
- Производительность API
- Ошибки в реальном времени

## Решение

Выбраны:
- **Prometheus**
- **Grafana**

### Обоснование:
- **Масштабируемость:** Подходит для роста нагрузки
- **Интеграция:** Работает с FastAPI и PostgreSQL

## Альтернативы

| Вариант | Плюсы | Минусы |
|---------|-------|--------|
| ELK Stack | Гибкость анализа логов | Сложность настройки |
| Datadog | Облачное решение | Дорого |

## Последствия

**Плюсы:**
- Открытый исходный код
- Гибкость настройки дашбордов

**Минусы:**
- Требует ручной настройки алертов
